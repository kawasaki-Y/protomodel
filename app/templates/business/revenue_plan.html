{% extends "base.html" %}

{% block title %}åç›Šè¨ˆç”» | çµŒå–¶ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ {% endblock %}

{% block styles %}
{{ super() }}
<style>
/* ã‚»ãƒ«ã‚µã‚¤ã‚ºã®èª¿æ•´ */
.revenue-table th, .revenue-table td {
    min-width: 150px;
    padding: 0.75rem 1rem;
}

/* é¡§å®¢ååˆ—ã¯ç‰¹ã«åºƒã */
.revenue-table th:first-child, 
.revenue-table td:first-child {
    min-width: 200px;
}

/* æ•°å€¤å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ï¼ˆæ›´æ–°ï¼‰ */
.revenue-table input[type="number"] {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid #e2e8f0;
    border-radius: 0.375rem;
    -moz-appearance: textfield;
}

/* Chromeãªã©ã§ã‚¹ãƒ”ãƒŠãƒ¼ã‚’éè¡¨ç¤ºï¼ˆæ›´æ–°ï¼‰ */
.revenue-table input[type="number"]::-webkit-outer-spin-button,
.revenue-table input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

/* Firefoxç”¨ã®ã‚¹ãƒ”ãƒŠãƒ¼éè¡¨ç¤ºï¼ˆè¿½åŠ ï¼‰ */
.revenue-table input[type="number"] {
    -moz-appearance: textfield !important;
}

/* ã‚¹ãƒ”ãƒŠãƒ¼ç„¡åŠ¹åŒ–ã®è¿½åŠ ã‚µãƒãƒ¼ãƒˆï¼ˆè¿½åŠ ï¼‰ */
.revenue-table input[type="number"]:hover,
.revenue-table input[type="number"]:focus {
    -moz-appearance: textfield !important;
    -webkit-appearance: none;
    margin: 0;
}

/* èª¬æ˜æ–‡ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.help-text {
    background-color: #f8fafc;
    border-left: 4px solid #3b82f6;
    padding: 1rem;
    margin: 1rem 0;
    border-radius: 0.375rem;
}
</style>
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="mb-8">
        <h1 class="text-2xl font-bold mb-4">åç›Šè¨ˆç”»</h1>
        <p class="text-gray-600">äº‹æ¥­ã”ã¨ã®åç›Šè¨ˆç”»ã‚’ä½œæˆãƒ»ç®¡ç†ã—ã¾ã™ã€‚</p>
        
        <!-- èª¬æ˜æ–‡ã‚’è¿½åŠ  -->
        <div class="help-text">
            <h3 class="font-bold mb-2">ğŸ“ ä½¿ã„æ–¹</h3>
            <p>1. é¡§å®¢ã‚’é¸æŠã—ã€å˜ä¾¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
            <p>2. å„æœˆã®è²©å£²æ•°ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«å£²ä¸ŠãŒè¨ˆç®—ã•ã‚Œã¾ã™ã€‚</p>
            <p>3. å¤‰æ›´å†…å®¹ã¯è‡ªå‹•çš„ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚</p>
        </div>
    </div>

    <!-- äº‹æ¥­ã‚¿ãƒ– -->
    <div class="mb-6">
        <div class="border-b border-gray-200">
            <nav class="-mb-px flex space-x-8" aria-label="Tabs" id="business-tabs">
                {% for business in businesses %}
                <button class="business-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"
                        data-business-id="{{ business.id }}"
                        onclick="switchBusiness({{ business.id }})">
                    {{ business.name }}
                </button>
                {% endfor %}
            </nav>
        </div>
    </div>

    <!-- åç›Šè¨ˆç”»ãƒ†ãƒ¼ãƒ–ãƒ« -->
    <div class="bg-white rounded-lg shadow overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 revenue-table">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">é¡§å®¢å</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å˜ä¾¡</th>
                    {% for month in range(1, 13) %}
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        {{ month }}æœˆ
                        <div class="text-xs text-gray-400">å£²ä¸Š</div>
                    </th>
                    {% endfor %}
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å¹´é–“åˆè¨ˆ</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ“ä½œ</th>
                </tr>
            </thead>
            <tbody id="revenue-plan-body" class="bg-white divide-y divide-gray-200">
                <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
            </tbody>
            <tfoot class="bg-gray-50">
                <tr>
                    <td colspan="2" class="px-6 py-4 whitespace-nowrap font-bold">åˆè¨ˆ</td>
                    {% for month in range(1, 13) %}
                    <td class="px-6 py-4 whitespace-nowrap font-bold month-total" data-month="{{ month }}">0</td>
                    {% endfor %}
                    <td class="px-6 py-4 whitespace-nowrap font-bold year-total">0</td>
                    <td></td>
                </tr>
            </tfoot>
        </table>
    </div>

    <!-- ä¿å­˜ãƒœã‚¿ãƒ³ã‚’è¿½åŠ  -->
    <div class="mt-4 flex justify-between items-center">
        <button type="button" class="add-row-btn bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
            <i class="fas fa-plus mr-2"></i>è¡Œã‚’è¿½åŠ 
        </button>
        <button type="button" onclick="saveAllData()" class="save-btn bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
            <i class="fas fa-save mr-2"></i>ä¿å­˜
        </button>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/revenue_plan.js') }}"></script>
{% endblock %} 